{"version":3,"sources":["node_modules/browser-pack/_prelude.js","jsalert.min.js","src/event-source.js","src/index.js","src/queue.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","JSAlert","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","EventSource","eventName","_this","callback","arguments","undefined","_eventListeners","push","Promise","onSuccess","onFail","_removeAfterCall","when","apply","callbacks","_len","args","Array","_key","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","splice","emit","mixin","otherClass","prop","hasOwnProperty","2","_interopRequireDefault","obj","__esModule","default","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_queue","_queue2","_eventSource","_eventSource2","_EventSource","getPrototypeOf","elems","title","text","buttons","result","alert","closeText","resolve","console","log","addButton","show","type","_this2","_this3","queue","popupQueue","add","then","remove","_show","removeElements","createBackground","createPopup","_this4","background","document","createElement","style","cssText","body","appendChild","setTimeout","opacity","_this5","container","transform","addTouchHandler","dismiss","innerHTML","_this6","removeElement","elem","parentNode","removeChild","handler","preventDefault","addEventListener","toastQueue","Queue","./event-source.js","./queue.js","3","items","current","item","activateHandler","checkActivated"],"mappings":"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","file":"jsalert.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.JSAlert = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//\n// EventSource class - This class provides simple event functionality for classes, with Promise support.\n//\n//\tUsage for once-off event listeners:\n//\n//\t\tmyObj.when(\"closed\").then(function(data) {\n//\t\t\talert(\"Closed! \" + data);\n//\t\t});\n//\n//\n//\tUsage for permanent event listeners:\n//\n//\t\tmyObj.on(\"closed\", function(data) {\n//\t\t\talert(\"Closed! \" + data);\n//\t\t});\n//\n//\n//\tUsage when triggering an event from a subclass:\n//\n//\t\tthis.emit(\"closed\", \"customData\");\n//\n\nvar EventSource = function () {\n\tfunction EventSource() {\n\t\t_classCallCheck(this, EventSource);\n\t}\n\n\t_createClass(EventSource, [{\n\t\tkey: \"when\",\n\n\n\t\t/** Adds an event listener. If callback is null, a Promise will be returned. Note that if using the Promise\r\n   *  it will only be triggered on the first event emitted. */\n\t\tvalue: function when(eventName) {\n\t\t\tvar _this = this;\n\n\t\t\tvar callback = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n\n\t\t\t// Make sure event listener object exists\n\t\t\tthis._eventListeners = this._eventListeners || {};\n\n\t\t\t// Make sure event listener array exists\n\t\t\tthis._eventListeners[eventName] = this._eventListeners[eventName] || [];\n\n\t\t\t// Check if using promise form\n\t\t\tif (callback) {\n\n\t\t\t\t// Just add the callback\n\t\t\t\tthis._eventListeners[eventName].push(callback);\n\t\t\t} else {\n\n\t\t\t\t// Return the promise\n\t\t\t\treturn new Promise(function (onSuccess, onFail) {\n\n\t\t\t\t\t// Promise callbacks can only be used once\n\t\t\t\t\tonSuccess._removeAfterCall = true;\n\n\t\t\t\t\t// Add success handler to event listener array\n\t\t\t\t\t_this._eventListeners[eventName].push(onSuccess);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/** Synonyms */\n\n\t}, {\n\t\tkey: \"on\",\n\t\tvalue: function on() {\n\t\t\treturn this.when.apply(this, arguments);\n\t\t}\n\t}, {\n\t\tkey: \"addEventListener\",\n\t\tvalue: function addEventListener() {\n\t\t\treturn this.when.apply(this, arguments);\n\t\t}\n\n\t\t/** Triggers an event. Each argument after the first one will be passed to event listeners */\n\n\t}, {\n\t\tkey: \"emit\",\n\t\tvalue: function emit(eventName) {\n\n\t\t\t// Get list of callbacks\n\t\t\tvar callbacks = this._eventListeners && this._eventListeners[eventName] || [];\n\n\t\t\t// Call events\n\n\t\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\t\targs[_key - 1] = arguments[_key];\n\t\t\t}\n\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = callbacks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar callback = _step.value;\n\n\n\t\t\t\t\t// Call it\n\t\t\t\t\tcallback.apply(this, args);\n\t\t\t\t}\n\n\t\t\t\t// Remove callbacks that can only be called once\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < callbacks.length; i++) {\n\t\t\t\tif (callbacks[i]._removeAfterCall) callbacks.splice(i--, 1);\n\t\t\t}\n\t\t}\n\n\t\t/** Synonyms */\n\n\t}, {\n\t\tkey: \"trigger\",\n\t\tvalue: function trigger() {\n\t\t\treturn this.emit.apply(this, arguments);\n\t\t}\n\t}, {\n\t\tkey: \"triggerEvent\",\n\t\tvalue: function triggerEvent() {\n\t\t\treturn this.emit.apply(this, arguments);\n\t\t}\n\t}]);\n\n\treturn EventSource;\n}();\n\n// Apply as a mixin to a class or object\n\n\nexports.default = EventSource;\nEventSource.mixin = function (otherClass) {\n\n\tfor (var prop in EventSource.prototype) {\n\t\tif (EventSource.prototype.hasOwnProperty(prop)) otherClass[prop] = EventSource.prototype[prop];\n\t}\n};\nmodule.exports = exports[\"default\"];\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _queue = require('./queue.js');\n\nvar _queue2 = _interopRequireDefault(_queue);\n\nvar _eventSource = require('./event-source.js');\n\nvar _eventSource2 = _interopRequireDefault(_eventSource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } //\n// Main class for the JSAlert package\n\nvar JSAlert = function (_EventSource) {\n\t_inherits(JSAlert, _EventSource);\n\n\t_createClass(JSAlert, null, [{\n\t\tkey: 'alert',\n\n\n\t\t/** @static Creates and shows a new alert with the specified text */\n\t\tvalue: function alert(text, title) {\n\t\t\tvar closeText = arguments.length <= 2 || arguments[2] === undefined ? \"Close\" : arguments[2];\n\n\n\t\t\t// Check if not in a browser\n\t\t\tif (typeof window === \"undefined\") return Promise.resolve(console.log(\"Alert: \" + text));\n\n\t\t\t// Create alert\n\t\t\tvar alert = new JSAlert();\n\t\t\talert.title = title;\n\t\t\talert.text = text;\n\t\t\talert.addButton(closeText);\n\n\t\t\t// Show it\n\t\t\treturn alert.show();\n\t\t}\n\n\t\t/** Constructor */\n\n\t}]);\n\n\tfunction JSAlert() {\n\t\t_classCallCheck(this, JSAlert);\n\n\t\t// Setup vars\n\n\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(JSAlert).call(this));\n\n\t\t_this.elems = {};\n\t\t_this.title = \"\";\n\t\t_this.text = \"\";\n\t\t_this.buttons = [];\n\t\t_this.result = false;\n\n\t\treturn _this;\n\t}\n\n\t/** Adds a button. Returns a Promise that is called if the button is clicked. */\n\n\n\t_createClass(JSAlert, [{\n\t\tkey: 'addButton',\n\t\tvalue: function addButton(text, type) {\n\t\t\tvar _this2 = this;\n\n\t\t\t// Return promise\n\t\t\treturn new Promise(function (onSuccess, onFail) {\n\n\t\t\t\t// Add button\n\t\t\t\t_this2.buttons.push({\n\t\t\t\t\ttext: text,\n\t\t\t\t\ttype: type || (_this2.buttons.length == 0 ? \"default\" : \"normal\"),\n\t\t\t\t\tcallback: onSuccess\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/** Shows the alert. Returns a Promise which is resolved when the alert closes. */\n\n\t}, {\n\t\tkey: 'show',\n\t\tvalue: function show() {\n\t\t\tvar _this3 = this;\n\n\t\t\t// TODO: Check which queue to use\n\t\t\tvar queue = JSAlert.popupQueue;\n\n\t\t\t// Add to show queue\n\t\t\tqueue.add(this).then(function () {\n\n\t\t\t\t// Add close listener, to remove us from the queue\n\t\t\t\t_this3.when(\"closed\").then(function () {\n\t\t\t\t\tqueue.remove(_this3);\n\t\t\t\t});\n\n\t\t\t\t// Show us\n\t\t\t\t_this3._show();\n\t\t\t});\n\n\t\t\t// Return a promise resolved when the popup closes\n\t\t\treturn this.when(\"closed\");\n\t\t}\n\n\t\t/** Dismisses the alert. */\n\n\t}, {\n\t\tkey: 'dismiss',\n\t\tvalue: function dismiss(result) {\n\n\t\t\t// Store result\n\t\t\tthis.result = result;\n\n\t\t\t// Remove elements\n\t\t\tthis.removeElements();\n\n\t\t\t// Trigger event\n\t\t\tthis.emit(\"closed\", result);\n\t\t}\n\n\t\t/** @private Called to actually show the alert. */\n\n\t}, {\n\t\tkey: '_show',\n\t\tvalue: function _show() {\n\n\t\t\t// Create elements\n\t\t\tthis.createBackground();\n\t\t\tthis.createPopup();\n\t\t}\n\n\t\t/** @private Called to create the overlay element. Theme subclasses can override this. */\n\n\t}, {\n\t\tkey: 'createBackground',\n\t\tvalue: function createBackground() {\n\t\t\tvar _this4 = this;\n\n\t\t\t// Create element\n\t\t\tthis.elems.background = document.createElement(\"div\");\n\t\t\tthis.elems.background.style.cssText = \"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 10000; background-color: rgba(0, 0, 0, 0.1); opacity: 0; transition: opacity 0.15s; \";\n\n\t\t\t// Add to document\n\t\t\tdocument.body.appendChild(this.elems.background);\n\n\t\t\t// Do animation\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this4.elems.background.style.opacity = 1;\n\t\t\t});\n\t\t}\n\n\t\t/** @private Called to create the popup element. Theme subclasses can override this. */\n\n\t}, {\n\t\tkey: 'createPopup',\n\t\tvalue: function createPopup() {\n\t\t\tvar _this5 = this;\n\n\t\t\t// Create container element\n\t\t\tthis.elems.container = document.createElement(\"div\");\n\t\t\tthis.elems.container.style.cssText = \"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 10001; display: flex; justify-content: center; align-items: center; opacity: 0; transform: translateY(-40px); transition: opacity 0.15s, transform 0.15s; \";\n\t\t\tdocument.body.appendChild(this.elems.container);\n\n\t\t\t// Do animation\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this5.elems.container.style.opacity = 1;\n\t\t\t\t_this5.elems.container.style.transform = \"translateY(0px)\";\n\t\t\t});\n\n\t\t\t// Add dismiss handler\n\t\t\tthis.addTouchHandler(this.elems.container, function () {\n\t\t\t\treturn _this5.dismiss();\n\t\t\t});\n\n\t\t\t// Create window\n\t\t\tthis.elems.window = document.createElement(\"div\");\n\t\t\tthis.elems.window.style.cssText = \"position: relative; background-color: rgba(255, 255, 255, 0.95); box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.25); border-radius: 5px; padding: 10px; min-width: 50px; min-height: 10px; max-width: 50%; max-height: 90%; \";\n\t\t\tthis.elems.container.appendChild(this.elems.window);\n\n\t\t\t// Create title if there is one\n\t\t\tif (this.title) {\n\n\t\t\t\tthis.elems.title = document.createElement(\"div\");\n\t\t\t\tthis.elems.title.style.cssText = \"display: block; text-align: center; font-family: Helvetica, Arial; font-size: 17px; font-weight: bold; color: #000; cursor: default; padding: 2px 20px; \";\n\t\t\t\tthis.elems.title.innerHTML = this.title;\n\t\t\t\tthis.elems.window.appendChild(this.elems.title);\n\t\t\t}\n\n\t\t\t// Create text if there is one\n\t\t\tif (this.text) {\n\n\t\t\t\tthis.elems.text = document.createElement(\"div\");\n\t\t\t\tthis.elems.text.style.cssText = \"display: block; text-align: center; font-family: Helvetica, Arial; font-size: 15px; font-weight: normal; color: #000; cursor: default; padding: 2px 20px; \";\n\t\t\t\tthis.elems.text.innerHTML = this.text;\n\t\t\t\tthis.elems.window.appendChild(this.elems.text);\n\t\t\t}\n\t\t}\n\n\t\t/** @private Called to remove all elements from the screen */\n\n\t}, {\n\t\tkey: 'removeElements',\n\t\tvalue: function removeElements() {\n\t\t\tvar _this6 = this;\n\n\t\t\t// Animate background away\n\t\t\tthis.elems.background.style.opacity = 0;\n\t\t\tthis.elems.container.style.opacity = 0;\n\t\t\tthis.elems.container.style.transform = \"translateY(40px)\";\n\n\t\t\t// Remove elements after animation\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this6.removeElement(_this6.elems.background);\n\t\t\t\t_this6.removeElement(_this6.elems.container);\n\t\t\t}, 250);\n\t\t}\n\n\t\t/** @private Helper function to remove an element */\n\n\t}, {\n\t\tkey: 'removeElement',\n\t\tvalue: function removeElement(elem) {\n\t\t\telem && elem.parentNode && elem.parentNode.removeChild(elem);\n\t\t}\n\n\t\t/** @private Helper function to add a click or touch event handler that doesn't bubble */\n\n\t}, {\n\t\tkey: 'addTouchHandler',\n\t\tvalue: function addTouchHandler(elem, callback) {\n\n\t\t\t// Create handler\n\t\t\tvar handler = function handler(e) {\n\n\t\t\t\t// Stop default browser action\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// Check if our element was pressed, not a child element\n\t\t\t\tif (e.target != elem) return;\n\n\t\t\t\t// Trigger callback\n\t\t\t\tcallback();\n\t\t\t};\n\n\t\t\t// Add listeners\n\t\t\tthis.elems.container.addEventListener(\"mousedown\", handler, true);\n\t\t\tthis.elems.container.addEventListener(\"touchstart\", handler, true);\n\t\t}\n\t}]);\n\n\treturn JSAlert;\n}(_eventSource2.default);\n\n// The default popup queue\n\n\nexports.default = JSAlert;\nJSAlert.popupQueue = new _queue2.default();\n\n// The toast queue\nJSAlert.toastQueue = new _queue2.default();\n\n// In case anyone wants to use the classes of this project on their own...\nJSAlert.Queue = _queue2.default;\nJSAlert.EventSource = _eventSource2.default;\nmodule.exports = exports['default'];\n\n},{\"./event-source.js\":1,\"./queue.js\":3}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventSource = require(\"./event-source.js\");\n\nvar _eventSource2 = _interopRequireDefault(_eventSource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } //\n// Queue class - A queue contains a list of items. Only one item can be active\n// at a time, and when one is removed the next one is activated\n//\n// To use this class, first add() your item. A promise will be returned that gets resolved\n// when your item is ready to be activated. Once your item is finished doing what it needs\n// to do, remove() it. This will trigger the next item's promise.\n//\n//\tExample:\n//\n//\t\tvar queue = new Queue();\n//\t\t\n//\t\tvar msgbox = new Popup();\n//\t\tqueue.add(msgbox).then(() => {\n//\t\t\tmsgbox.show();\n//\t\t\tmsgbox.when('closed').then(() => queue.remove(msgbox));\n//\t\t}\n//\t\t\n//\t\tvar msgbox2 = new Popup();\n//\t\tqueue.add(msgbox2).then(() => {\n//\t\t\tmsgbox2.show();\n//\t\t\tmsgbox2.when('closed').then(() => queue.remove(msgbox2));\n//\t\t}\n//\t\n//\n//\tIn the above example, only one message box would be visible at a time.\n//\n\nvar Queue = function (_EventSource) {\n\t_inherits(Queue, _EventSource);\n\n\tfunction Queue() {\n\t\t_classCallCheck(this, Queue);\n\n\t\t// Setup vars\n\n\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Queue).call(this));\n\n\t\t_this.items = [];\n\t\t_this.current = null;\n\n\t\treturn _this;\n\t}\n\n\t/** Adds a queue item, and returns a Promise. */\n\n\n\t_createClass(Queue, [{\n\t\tkey: \"add\",\n\t\tvalue: function add(item) {\n\t\t\tvar _this2 = this;\n\n\t\t\t// Return a promise\n\t\t\treturn new Promise(function (onSuccess, onFail) {\n\n\t\t\t\t// Store item and handler at the end of the queue. When this item is ready to be activated, the handler will be called to resolve the promise.\n\t\t\t\t_this2.items.push({\n\t\t\t\t\titem: item,\n\t\t\t\t\tactivateHandler: onSuccess\n\t\t\t\t});\n\n\t\t\t\t// Emit event\n\t\t\t\t_this2.emit(\"added\", item);\n\n\t\t\t\t// Check if we can activate this one now\n\t\t\t\t_this2.checkActivated();\n\t\t\t});\n\t\t}\n\n\t\t/** @private Checks if there a new item to be activated */\n\n\t}, {\n\t\tkey: \"checkActivated\",\n\t\tvalue: function checkActivated() {\n\n\t\t\t// Check if there's already an activated item\n\t\t\tif (this.current) return;\n\n\t\t\t// Check if we have any items\n\t\t\tif (this.items.length == 0) {\n\n\t\t\t\t// No more items\n\t\t\t\tthis.emit(\"empty\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We can activate the next item now\n\t\t\tthis.current = this.items[0];\n\n\t\t\t// Resolve promise\n\t\t\tthis.current.activateHandler && this.current.activateHandler(this.current.item);\n\n\t\t\t// Trigger event\n\t\t\tthis.emit(\"activated\", this.current.item);\n\t\t}\n\n\t\t/** Removes a queued item. If the item is the currently activated one, the next item in the queue will be activated. */\n\n\t}, {\n\t\tkey: \"remove\",\n\t\tvalue: function remove(item) {\n\n\t\t\t// Remove item from queue\n\t\t\tfor (var i = 0; i < this.items.length; i++) {\n\t\t\t\tif (this.items[i].item == item) this.items.splice(i--, 1);\n\t\t\t} // Emit event\n\t\t\tthis.emit(\"removed\", item);\n\n\t\t\t// Check if this was the current item\n\t\t\tif (this.current && this.current.item == item) this.current = null;\n\n\t\t\t// Possibly activate the next item\n\t\t\tthis.checkActivated();\n\t\t}\n\t}]);\n\n\treturn Queue;\n}(_eventSource2.default);\n\nexports.default = Queue;\nmodule.exports = exports[\"default\"];\n\n},{\"./event-source.js\":1}]},{},[2])(2)\n});\n\n","//\r\n// EventSource class - This class provides simple event functionality for classes, with Promise support.\r\n//\r\n//\tUsage for once-off event listeners:\r\n//\r\n//\t\tmyObj.when(\"closed\").then(function(data) {\r\n//\t\t\talert(\"Closed! \" + data);\r\n//\t\t});\r\n//\r\n//\r\n//\tUsage for permanent event listeners:\r\n//\r\n//\t\tmyObj.on(\"closed\", function(data) {\r\n//\t\t\talert(\"Closed! \" + data);\r\n//\t\t});\r\n//\r\n//\r\n//\tUsage when triggering an event from a subclass:\r\n//\r\n//\t\tthis.emit(\"closed\", \"customData\");\r\n//\r\n\r\n\r\nexport default class EventSource {\r\n\t\r\n\t/** Adds an event listener. If callback is null, a Promise will be returned. Note that if using the Promise\r\n\t *  it will only be triggered on the first event emitted. */\r\n\twhen(eventName, callback = null) {\r\n\t\t\r\n\t\t// Make sure event listener object exists\r\n\t\tthis._eventListeners = this._eventListeners || {};\r\n\t\t\r\n\t\t// Make sure event listener array exists\r\n\t\tthis._eventListeners[eventName] = this._eventListeners[eventName] || [];\r\n\t\t\r\n\t\t// Check if using promise form\r\n\t\tif (callback) {\r\n\t\t\t\r\n\t\t\t// Just add the callback\r\n\t\t\tthis._eventListeners[eventName].push(callback);\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\r\n\t\t\t// Return the promise\r\n\t\t\treturn new Promise((onSuccess, onFail) => {\r\n\t\t\t\t\r\n\t\t\t\t// Promise callbacks can only be used once\r\n\t\t\t\tonSuccess._removeAfterCall = true;\r\n\t\t\t\t\r\n\t\t\t\t// Add success handler to event listener array\r\n\t\t\t\tthis._eventListeners[eventName].push(onSuccess);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t/** Synonyms */\r\n\ton() {\r\n\t\treturn this.when.apply(this, arguments);\r\n\t}\r\n\t\r\n\taddEventListener() {\r\n\t\treturn this.when.apply(this, arguments);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t/** Triggers an event. Each argument after the first one will be passed to event listeners */\r\n\temit(eventName, ...args) {\r\n\t\t\r\n\t\t// Get list of callbacks\r\n\t\tvar callbacks = this._eventListeners && this._eventListeners[eventName] || [];\r\n\t\t\r\n\t\t// Call events\r\n\t\tfor (var callback of callbacks) {\r\n\t\t\t\r\n\t\t\t// Call it\r\n\t\t\tcallback.apply(this, args);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t// Remove callbacks that can only be called once\r\n\t\tfor (var i = 0 ; i < callbacks.length ; i++)\r\n\t\t\tif (callbacks[i]._removeAfterCall)\r\n\t\t\t\tcallbacks.splice(i--, 1);\r\n\t\t\r\n\t}\r\n\t\r\n\t/** Synonyms */\r\n\ttrigger() {\r\n\t\treturn this.emit.apply(this, arguments);\r\n\t}\r\n\t\r\n\ttriggerEvent() {\r\n\t\treturn this.emit.apply(this, arguments);\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n// Apply as a mixin to a class or object\r\nEventSource.mixin = function(otherClass) {\r\n\t\r\n\tfor (var prop in EventSource.prototype)\r\n\t\tif (EventSource.prototype.hasOwnProperty(prop))\r\n\t\t\totherClass[prop] = EventSource.prototype[prop];\r\n\t\r\n}","//\r\n// Main class for the JSAlert package\r\n\r\nimport Queue from './queue.js'\r\nimport EventSource from './event-source.js'\r\n\r\nexport default class JSAlert extends EventSource {\r\n\t\r\n\t/** @static Creates and shows a new alert with the specified text */\r\n\tstatic alert(text, title, closeText = \"Close\") {\r\n\t\t\r\n\t\t// Check if not in a browser\r\n\t\tif (typeof window === \"undefined\")\r\n\t\t\treturn Promise.resolve(console.log(\"Alert: \" + text));\r\n\t\t\r\n\t\t// Create alert\r\n\t\tvar alert = new JSAlert();\r\n\t\talert.title = title;\r\n\t\talert.text = text;\r\n\t\talert.addButton(closeText);\r\n\t\t\r\n\t\t// Show it\r\n\t\treturn alert.show();\r\n\t\t\r\n\t}\r\n\t\r\n\t/** Constructor */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// Setup vars\r\n\t\tthis.elems \t\t= {};\r\n\t\tthis.title\t\t= \"\";\r\n\t\tthis.text\t\t= \"\";\r\n\t\tthis.buttons\t= [];\r\n\t\tthis.result\t\t= false;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** Adds a button. Returns a Promise that is called if the button is clicked. */\r\n\taddButton(text, type) {\r\n\t\t\r\n\t\t// Return promise\r\n\t\treturn new Promise((onSuccess, onFail) => {\r\n\t\t\t\r\n\t\t\t// Add button\r\n\t\t\tthis.buttons.push({\r\n\t\t\t\ttext: text,\r\n\t\t\t\ttype: type || (this.buttons.length == 0 ? \"default\" : \"normal\"),\r\n\t\t\t\tcallback: onSuccess\r\n\t\t\t});\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** Shows the alert. Returns a Promise which is resolved when the alert closes. */\r\n\tshow() {\r\n\t\t\r\n\t\t// TODO: Check which queue to use\r\n\t\tvar queue = JSAlert.popupQueue;\r\n\t\t\r\n\t\t// Add to show queue\r\n\t\tqueue.add(this).then(() => {\r\n\t\t\t\r\n\t\t\t// Add close listener, to remove us from the queue\r\n\t\t\tthis.when(\"closed\").then(() => {\r\n\t\t\t\tqueue.remove(this);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// Show us\r\n\t\t\tthis._show();\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\t// Return a promise resolved when the popup closes\r\n\t\treturn this.when(\"closed\");\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** Dismisses the alert. */\r\n\tdismiss(result) {\r\n\t\t\r\n\t\t// Store result\r\n\t\tthis.result = result;\r\n\t\t\r\n\t\t// Remove elements\r\n\t\tthis.removeElements();\r\n\t\t\r\n\t\t// Trigger event\r\n\t\tthis.emit(\"closed\", result);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** @private Called to actually show the alert. */\r\n\t_show() {\r\n\t\t\r\n\t\t// Create elements\r\n\t\tthis.createBackground();\r\n\t\tthis.createPopup();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** @private Called to create the overlay element. Theme subclasses can override this. */\r\n\tcreateBackground() {\r\n\t\t\r\n\t\t// Create element\r\n\t\tthis.elems.background = document.createElement(\"div\");\r\n\t\tthis.elems.background.style.cssText = \"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 10000; background-color: rgba(0, 0, 0, 0.1); opacity: 0; transition: opacity 0.15s; \";\r\n\t\t\r\n\t\t// Add to document\r\n\t\tdocument.body.appendChild(this.elems.background);\r\n\t\t\r\n\t\t// Do animation\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.elems.background.style.opacity = 1;\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** @private Called to create the popup element. Theme subclasses can override this. */\r\n\tcreatePopup() {\r\n\t\t\r\n\t\t// Create container element\r\n\t\tthis.elems.container = document.createElement(\"div\");\r\n\t\tthis.elems.container.style.cssText = \"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 10001; display: flex; justify-content: center; align-items: center; opacity: 0; transform: translateY(-40px); transition: opacity 0.15s, transform 0.15s; \";\r\n\t\tdocument.body.appendChild(this.elems.container);\r\n\t\t\r\n\t\t// Do animation\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.elems.container.style.opacity = 1;\r\n\t\t\tthis.elems.container.style.transform = \"translateY(0px)\";\r\n\t\t});\r\n\t\t\r\n\t\t// Add dismiss handler\r\n\t\tthis.addTouchHandler(this.elems.container, () => this.dismiss() );\r\n\t\t\r\n\t\t// Create window\r\n\t\tthis.elems.window = document.createElement(\"div\");\r\n\t\tthis.elems.window.style.cssText = \"position: relative; background-color: rgba(255, 255, 255, 0.95); box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.25); border-radius: 5px; padding: 10px; min-width: 50px; min-height: 10px; max-width: 50%; max-height: 90%; \";\r\n\t\tthis.elems.container.appendChild(this.elems.window);\r\n\t\t\r\n\t\t// Create title if there is one\r\n\t\tif (this.title) {\r\n\t\t\t\r\n\t\t\tthis.elems.title = document.createElement(\"div\");\r\n\t\t\tthis.elems.title.style.cssText = \"display: block; text-align: center; font-family: Helvetica, Arial; font-size: 17px; font-weight: bold; color: #000; cursor: default; padding: 2px 20px; \";\r\n\t\t\tthis.elems.title.innerHTML = this.title;\r\n\t\t\tthis.elems.window.appendChild(this.elems.title);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t// Create text if there is one\r\n\t\tif (this.text) {\r\n\t\t\t\r\n\t\t\tthis.elems.text = document.createElement(\"div\");\r\n\t\t\tthis.elems.text.style.cssText = \"display: block; text-align: center; font-family: Helvetica, Arial; font-size: 15px; font-weight: normal; color: #000; cursor: default; padding: 2px 20px; \";\r\n\t\t\tthis.elems.text.innerHTML = this.text;\r\n\t\t\tthis.elems.window.appendChild(this.elems.text);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** @private Called to remove all elements from the screen */\r\n\tremoveElements() {\r\n\t\t\r\n\t\t// Animate background away\r\n\t\tthis.elems.background.style.opacity = 0;\r\n\t\tthis.elems.container.style.opacity = 0;\r\n\t\tthis.elems.container.style.transform = \"translateY(40px)\";\r\n\t\t\r\n\t\t// Remove elements after animation\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.removeElement(this.elems.background);\r\n\t\t\tthis.removeElement(this.elems.container);\r\n\t\t}, 250);\r\n\t\t\r\n\t}\r\n\t\r\n\t/** @private Helper function to remove an element */\r\n\tremoveElement(elem) {\r\n\t\telem && elem.parentNode && elem.parentNode.removeChild(elem);\r\n\t}\r\n\t\r\n\t/** @private Helper function to add a click or touch event handler that doesn't bubble */\r\n\taddTouchHandler(elem, callback) {\r\n\t\t\r\n\t\t// Create handler\r\n\t\tvar handler = (e) => {\r\n\t\t\t\r\n\t\t\t// Stop default browser action\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\t// Check if our element was pressed, not a child element\r\n\t\t\tif (e.target != elem)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\t// Trigger callback\r\n\t\t\tcallback();\r\n\t\t}\r\n\t\t\r\n\t\t// Add listeners\r\n\t\tthis.elems.container.addEventListener(\"mousedown\", handler, true);\r\n\t\tthis.elems.container.addEventListener(\"touchstart\", handler, true);\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n\t\r\n// The default popup queue\r\nJSAlert.popupQueue = new Queue();\r\n\r\n// The toast queue\r\nJSAlert.toastQueue = new Queue();\r\n\r\n\r\n// In case anyone wants to use the classes of this project on their own...\r\nJSAlert.Queue = Queue;\r\nJSAlert.EventSource = EventSource;","//\r\n// Queue class - A queue contains a list of items. Only one item can be active\r\n// at a time, and when one is removed the next one is activated\r\n//\r\n// To use this class, first add() your item. A promise will be returned that gets resolved\r\n// when your item is ready to be activated. Once your item is finished doing what it needs\r\n// to do, remove() it. This will trigger the next item's promise.\r\n//\r\n//\tExample:\r\n//\r\n//\t\tvar queue = new Queue();\r\n//\t\t\r\n//\t\tvar msgbox = new Popup();\r\n//\t\tqueue.add(msgbox).then(() => {\r\n//\t\t\tmsgbox.show();\r\n//\t\t\tmsgbox.when('closed').then(() => queue.remove(msgbox));\r\n//\t\t}\r\n//\t\t\r\n//\t\tvar msgbox2 = new Popup();\r\n//\t\tqueue.add(msgbox2).then(() => {\r\n//\t\t\tmsgbox2.show();\r\n//\t\t\tmsgbox2.when('closed').then(() => queue.remove(msgbox2));\r\n//\t\t}\r\n//\t\r\n//\r\n//\tIn the above example, only one message box would be visible at a time.\r\n//\r\n\r\nimport EventSource from './event-source.js'\r\n\r\n\r\nexport default class Queue extends EventSource {\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// Setup vars\r\n\t\tthis.items \t\t\t\t= [];\r\n\t\tthis.current\t\t\t= null;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** Adds a queue item, and returns a Promise. */\r\n\tadd(item) {\r\n\t\t\r\n\t\t// Return a promise\r\n\t\treturn new Promise((onSuccess, onFail) => {\r\n\t\t\t\r\n\t\t\t// Store item and handler at the end of the queue. When this item is ready to be activated, the handler will be called to resolve the promise.\r\n\t\t\tthis.items.push({\r\n\t\t\t\titem: item,\r\n\t\t\t\tactivateHandler: onSuccess\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// Emit event\r\n\t\t\tthis.emit(\"added\", item);\r\n\t\t\t\r\n\t\t\t// Check if we can activate this one now\r\n\t\t\tthis.checkActivated();\r\n\t\t\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/** @private Checks if there a new item to be activated */\r\n\tcheckActivated() {\r\n\t\t\r\n\t\t// Check if there's already an activated item\r\n\t\tif (this.current)\r\n\t\t\treturn;\r\n\t\t\r\n\t\t// Check if we have any items\r\n\t\tif (this.items.length == 0) {\r\n\t\t\t\r\n\t\t\t// No more items\r\n\t\t\tthis.emit(\"empty\");\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t// We can activate the next item now\r\n\t\tthis.current = this.items[0];\r\n\t\t\r\n\t\t// Resolve promise\r\n\t\tthis.current.activateHandler && this.current.activateHandler(this.current.item);\r\n\t\t\r\n\t\t// Trigger event\r\n\t\tthis.emit(\"activated\", this.current.item);\r\n\t\t\r\n\t}\r\n\t\r\n\t/** Removes a queued item. If the item is the currently activated one, the next item in the queue will be activated. */\r\n\tremove(item) {\r\n\t\t\r\n\t\t// Remove item from queue\r\n\t\tfor (var i = 0 ; i < this.items.length ; i++)\r\n\t\t\tif (this.items[i].item == item)\r\n\t\t\t\tthis.items.splice(i--, 1);\r\n\t\t\t\r\n\t\t// Emit event\r\n\t\tthis.emit(\"removed\", item);\r\n\t\t\t\r\n\t\t// Check if this was the current item\r\n\t\tif (this.current && this.current.item == item)\r\n\t\t\tthis.current = null;\r\n\t\t\r\n\t\t// Possibly activate the next item\r\n\t\tthis.checkActivated();\r\n\t\t\r\n\t}\r\n\t\r\n}"],"sourceRoot":"/source/"}